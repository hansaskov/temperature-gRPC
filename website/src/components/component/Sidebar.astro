---
import CalendarIcon from "../icons/CalendarIcon.astro";
import ComputerIcon from "../icons/ComputerIcon.astro";
import HomeIcon from "../icons/HomeIcon.astro";
import SettingsIcon from "../icons/SettingsIcon.astro";

const currentPath = Astro.url.pathname;

function isActive(href: string) {
  if (href === '/') {
    return currentPath === href;
  }
  return currentPath.startsWith(href);
}

function getLinkClasses(href: string) {
  const baseClasses = "flex items-center gap-3 rounded-lg px-3 py-2 transition-all hover:text-primary";
  const activeClasses = "bg-muted text-primary";
  const inactiveClasses = "text-muted-foreground";
  
  return `${baseClasses} ${isActive(href) ? activeClasses : inactiveClasses}`;
}
---
<div class="hidden border-r bg-muted/40 md:block">
  <div class="flex h-full max-h-screen flex-col gap-2">
    <div class="flex h-14 items-center border-b px-4 lg:h-[60px] lg:px-6">
      <a href="#" class="flex items-center gap-2 font-semibold">
        <ComputerIcon class="h-6 w-6" />
        <span>TriVision</span>
      </a>
    </div>
    <nav class="flex flex-col h-full justify-between px-2 text-sm font-medium lg:px-4">
      <div class="flex flex-col">
        <a
          href="/"
          class={getLinkClasses("/")}
        >
          <HomeIcon class="h-4 w-4" />
          Dashboard
        </a>
        <a
          href="/schedule"
          class={getLinkClasses("/schedule")}
        >
          <CalendarIcon class="h-4 w-4" />
          Schedules
        </a>
        <a
          href="/settings"
          class={getLinkClasses("/settings")}
        >
          <SettingsIcon class="h-4 w-4" />
          Settings
        </a>
      </div>
    </nav>
  </div>
</div>